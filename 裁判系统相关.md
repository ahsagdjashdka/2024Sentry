### 24赛季哨兵裁判系统信息及规则
### 规则
[机甲大师超级对抗赛比赛规则手册V1.2（20240411）](https://terra-1-g.djicdn.com/b2a076471c6c4b72b574a977334d3e05/RM2024/RoboMaster%202024%20%E6%9C%BA%E7%94%B2%E5%A4%A7%E5%B8%88%E8%B6%85%E7%BA%A7%E5%AF%B9%E6%8A%97%E8%B5%9B%E6%AF%94%E8%B5%9B%E8%A7%84%E5%88%99%E6%89%8B%E5%86%8CV1.2%EF%BC%8820240411%EF%BC%89.pdf)</br> 
[裁判系统串口协议附录 V1.6.1（20240122）](https://terra-1-g.djicdn.com/b2a076471c6c4b72b574a977334d3e05/RM2024/RoboMaster%20%E8%A3%81%E5%88%A4%E7%B3%BB%E7%BB%9F%E4%B8%B2%E5%8F%A3%E5%8D%8F%E8%AE%AE%E9%99%84%E5%BD%95%20V1.6.1%EF%BC%8820240122%EF%BC%89.pdf)

### 会用到的裁判系统相关指令</br>
#### 裁判系统相关</br>
![输入图片说明](pictures/%E5%93%A8%E5%85%B5%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9B%B8%E5%85%B3%E6%9C%BA%E5%88%B6.png)</br>

1.内容：</br>
receive</br>
比赛状态数据，固定以 1Hz 频率发送:</br>
```
0x0001 比赛状态数据
uint8 game_progress # 当前比赛阶段
uint16 stage_remain_time # 当前阶段剩余时间
```
![输入图片说明](pictures/%E6%AF%94%E8%B5%9B%E7%8A%B6%E6%80%81%E6%95%B0%E6%8D%AE.png)</br>

机器人血量数据，固定以 3Hz 频率发送:</br>
```
0x0003 机器人血量数据
uint16 red_outpost_hp # 红方前哨站血量
uint16 red_base_hp # 红方基地血量

uint16 blue_outpost_hp # 蓝方前哨站血量
uint16 blue_base_hp # 蓝方基地血量
```
![输入图片说明](pictures/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%A1%80%E9%87%8F%E6%95%B0%E6%8D%AE.png)</br>

场地事件数据，固定以 1Hz 频率发送:</br>
```
0x0101 场地事件数据
uint32_t event_data; # 己方补给站前补血点的占领状态，1 为已占领
                     # 己方补给站内部补血点的占领状态，1 为已占领
                     # 己方补给区的占领状态，1 为已占领（仅 RMUL 适用）
                     # 己方基地虚拟护盾的剩余值百分比（四舍五入，保留整数）
```
![输入图片说明](pictures/%E5%9C%BA%E5%9C%B0%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE.png)</br>

补给站动作标识数据，补给站弹丸释放时触发发送:</br>

``` 
0x0102 补给站动作标识数据
uint8_t reserved; # 保留
uint8_t supply_robot_id; # 补弹机器人 ID
uint8_t supply_projectile_step; # 出弹口开闭状态
uint8_t supply_projectile_num; # 补弹数量
```
![输入图片说明](pictures/%E8%A1%A5%E7%BB%99%E7%AB%99%E5%8A%A8%E4%BD%9C%E6%A0%87%E8%AF%86%E6%95%B0%E6%8D%AE.png)</br>

机器人性能体系数据，固定以10Hz 频率发送</br>
```
0x0201 机器人性能体系数据
uint16_t current_HP; # 机器人当前血量
```
![输入图片说明](pictures/%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%80%A7%E8%83%BD%E4%BD%93%E7%B3%BB%E6%95%B0%E6%8D%AE.png)</br>

机器人位置数据，固定以 1Hz 频率发送</br>

```
0x0203 机器人位置数据
float x; # 本机器人位置 x 坐标，单位：m
float y; # 本机器人位置 y 坐标，单位：m
float angle; # 本机器人测速模块的朝向，单位：度。正北为 0 度
```
![输入图片说明](pictures/%E6%9C%BA%E5%99%A8%E4%BA%BA%E4%BD%8D%E7%BD%AE%E6%95%B0%E6%8D%AE.png)</br>

机器人增益数据，固定以 3Hz 频率发送 </br>

```
0x0204 机器人增益数据
uint8_t recovery_buff; # 机器人回血增益（百分比，值为 10 表示每秒恢复血量上限的 10%）
uint8_t cooling_buff; # 机器人枪口冷却倍率（直接值，值为 5 表示 5 倍冷却）
uint8_t defence_buff; # 机器人防御增益（百分比，值为 50 表示 50%防御增益）
uint8_t vulnerability_buff; # 机器人负防御增益（百分比，值为 30 表示-30%防御增益）
uint16_t attack_buff; # 机器人攻击增益（百分比，值为 50 表示 50%攻击增益）
```
![输入图片说明](pictures/%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%A2%9E%E7%9B%8A%E6%95%B0%E6%8D%AE.png)</br>

允许发弹量，固定以 10Hz 频率发送</br>
```
0x0208 允许发弹量
uint16_t projectile_allowance_17mm; # 17mm 弹丸允许发弹量
uint16_t remaining_gold_coin; # 剩余金币数量
```
![输入图片说明](pictures/%E5%85%81%E8%AE%B8%E5%8F%91%E5%BC%B9%E9%87%8F.png)</br>

机器人 RFID 模块状态，固定以3Hz 频率发送</br>

```
0x0209 机器人RFID模块状态
uint32_t rfid_status; # bit 13：己方补血点（检测到任一均视为激活）
                      # bit 14：己方哨兵巡逻区
```
![输入图片说明](pictures/%E6%9C%BA%E5%99%A8%E4%BA%BARFID%E6%A8%A1%E5%9D%97%E7%8A%B6%E6%80%81.png)</br>

哨兵自主决策指令</br>
```
0x0120 哨兵自主决策指令
uint32_t sentry_cmd;
```
![输入图片说明](pictures/%E5%93%A8%E5%85%B5%E8%87%AA%E4%B8%BB%E5%86%B3%E7%AD%96%E6%8C%87%E4%BB%A41.png)</br>
![输入图片说明](pictures/%E5%9B%BE%E5%93%A8%E5%85%B5%E8%87%AA%E4%B8%BB%E5%86%B3%E7%AD%96%E6%8C%87%E4%BB%A42.png)</br>

send 
哨兵通过常规链路向对应操作手段发送路径坐标数据，该路径会在小地图上显示。</br>
选手端小地图接收哨兵数据，频率上限为1Hz </br>

```
0x0307 选手端小地图接收哨兵数据
uint8_t intention;
uint16_t start_position_x; # 路径起点 x 轴坐标，单位：dm 
uint16_t start_position_y; # 路径起点 x 轴坐标，单位：dm 
int8_t delta_x[49]; # 路径点 x 轴增量数组，单位：dm
int8_t delta_y[49]; # 路径点 y 轴增量数组，单位：dm
uint16_t sender_id; # 发送者 ID
```
![输入图片说明](pictures/%E9%80%89%E6%89%8B%E7%AB%AF2%E5%B0%8F%E5%9C%B0%E5%9B%BE%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE.png)

